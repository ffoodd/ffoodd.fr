---
title: "Le web en kit"
date: "2015-10-30T10:11:52"
modified: "2015-11-04T11:21:28"
permalink: "le-web-en-kit/index.html"
excerpt: "<p>Le web, c&#700;est compliquÃ©. Je dirais mÃªme plus&nbsp;: c&#700;est la jungle. De multiples sources, de multiples protocoles d&#700;Ã©change de donnÃ©es, de multiple maniÃ¨re d&#700;accÃ©der aux contenus. Et aussi plein de gens qui fabriquent des morceaux de web. Ceux-lÃ  sont un minimum flemmards â€”&nbsp;je le sais bien, j&#700;en fais partie. Alors rÃ©guliÃ¨rement, nous cÃ©dons Ã  la facilitÃ© et cela produit des perturbations dans La Force. Un exemple&nbsp;? Les sites <code>-webkit-</code> <i>only</i>. Parlons-en&nbsp;! <a href="https://www.ffoodd.fr/le-web-en-kit/" aria-hidden="true">Lire la suite de Â«&nbsp;Le web en kit&nbsp;Â» <span class="meta-nav">&rarr;</span></a></p>
"
format: "standard"
---
<p>Beaucoup de gens qui fabriquent le web se sont plaints de lÊ¼hÃ©gÃ©monie dÊ¼<abbr lang="en" title="Internet Explorer">IE</abbr>6.</p>
<p>Pour protester, ils se sont ruÃ©s sur les nouveaux arrivantsÂ : Firefox et Chrome. Puis les produits Apple ont dÃ©barquÃ©, apportant avec eux Safari. CÊ¼Ã©tait encore une rÃ©volution â€”Â et de fait, le nouvel endroit ou aller. Or Safari fonctionne sur la mÃªme base que Chrome, Ã  savoir le moteur de rendu Webkit. Et petit Ã  petit, nous nous sommes retrouvÃ©s <strong>avec un nouveau monopole</strong>.</p>
<p>Malheureusement, on ne casse pas un monopole avec un monopole. Car tous ces gens qui se sont ruÃ©s sur les navigateurs WebKit ont produit des morceaux de web qui ne sont pas inter-opÃ©rablesÂ : on ne pouvait sÊ¼en servir (voire simplement y accÃ©der) autrement <strong>quÊ¼avec un sÃ©same estampillÃ© WebKit</strong>.</p>
<h2>Microsoft et Edge</h2>
<p>De faÃ§on parfaitement sensÃ©e, Microsoft â€”Â qui dÃ©tenait environ 95% des parts de marchÃ© des navigateurs web (ce qui lui est reprochÃ©)Â â€” a voulu faire table rase du passÃ© pour en finir avec la mauvaise rÃ©putation de son navigateur vedette<sup aria-describedby="note-1" id="lien-1" data-note="JÊ¼aime rappeler aux gens qui pestent aprÃ¨s IE quÊ¼il est ma foi fort probable quÊ¼ils fissent partie des 95% dÊ¼internautes qui naviguaient avec. Ã‡a pique."><a class="scroll print-hidden" href="https://www.ffoodd.fr/le-web-en-kit/#note-1" title="JÊ¼aime rappeler aux gens qui pestent aprÃ¨s IE quÊ¼il est ma foi fort probable quÊ¼ils fissent partie des 95% dÊ¼internautes qui naviguaient avec. Ã‡a pique.">[1]</a></sup>. Ils ont donc conÃ§u Edge avec pour objectif principal de servir un maximum de sites correctement Ã  leurs utilisateurs. Et pour Ã§a, ils devaient gÃ©rer les sites conÃ§us pour WebKit.</p>
<p><a href="http://blogs.windows.com/msedgedev/2015/06/17/building-a-more-interoperable-web-with-microsoft-edge/"><strong>Alors ils font passer Edge pour WebKit.</strong></a></p>
<h2>Le <i lang="en">-webkit-only</i></h2>
<h3>Les prÃ©fixes vendeurs</h3>
<p>Vous commencez Ã  flairer lÊ¼arnaque, pas vraiÂ ? Edge interprÃ¨te dÃ©sormais les <abbr lang="en" title="Cascading StyleSheet">CSS</abbr> prÃ©fixÃ©es par <code>-webkit-</code>. Bon allez, si Ã§a nÊ¼est que Ã§a cÊ¼est de bonne guerreÂ !</p>
<p>Sauf queâ€¦ <strong>Non</strong>. Ã‡a ne sÊ¼arrÃªte pas Ã  Ã§a.</p>
<h3>Les propriÃ©tÃ©s hors spÃ©cification</h3>
<p>Pendant trÃ¨s longtemps, Chrome et Safari ont implÃ©mentÃ© des nouveautÃ©s avant de les proposer aux concepteurs des spÃ©cifications â€”Â notamment des propriÃ©tÃ©s et valeurs CSS. Ã‡a permet de mettre un peu de pression sur le processus de spÃ©cification et de tenir en haleine les dÃ©veloppeurs.</p>
<p>Parmi ces nouveautÃ©s, la valeur <code>text</code> pour la propriÃ©tÃ© <code>background-clip</code>.</p>
<p>Cette propriÃ©tÃ© fait partie intÃ©grante de <a href="https://drafts.csswg.org/css-backgrounds-3/#the-background-clip">la spÃ©cification (en anglais</a>) depuis longtemps. La valeur <code>text</code> a Ã©tÃ© <a href="https://www.webkit.org/blog/164/background-clip-text/">proposÃ©e en 2008 par WebKit (en anglais)</a>, et nÊ¼Ã©tait â€”Â jusquÊ¼Ã  preuve du contraireÂ â€” supportÃ©e que par les navigateurs basÃ©s sur WebKit.</p>
<h2>Edge gÃ¨reÂ !</h2>
<p>Edge lÊ¼interprÃ¨te, cette valeur exotique â€”&nbsp;et sans souci. JÊ¼ai dÃ©couvert Ã§a inopinÃ©ment, en me disant que <a href="http://nimbupani.com/using-background-clip-for-text-with-css-fallback.html">la solution de repli proposÃ©e par Divya Manian (en anglais)</a> Ã©tait robuste. En terme de logique, elle est imparableÂ : lÊ¼arriÃ¨re-plan est conÃ§u pour ne sÊ¼appliquer que si le clip est interprÃ©tÃ©, car l&#700;ensemble est prÃ©fixÃ© par <code>-webkit-</code>. Voyez plutÃ´t&nbsp;:</p>
<pre><code class="language-css"><br />
[class=&quot;rainbow&quot;] {<br />
  color: #fff;<br />
  display: inline-block;<br />
  /* -webkit-only: Chrome, Safari, Opera */  <br />
  background: -webkit-linear-gradient(â€¦);<br />
  background: -o-linear-gradient(â€¦);<br />
  -webkit-text-fill-color: transparent;<br />
  -webkit-background-clip: text;<br />
}<br />
</code></pre>
<p>Mais Edge considÃ¨re dÃ©sormais les prÃ©fixes <code>-webkit-</code> comme des <i>aliases</i>, et les mange tout crus. Ã‡a aurait pu Ãªtre un problÃ¨me dans ce cas prÃ©cis, puisque thÃ©oriquement la paire <code>background-clip: text;</code> nÊ¼est reconnue que par les navigateurs basÃ©s sur WebKit. LÃ  encoreÂ : <strong>surprise</strong>Â ! Edge lÊ¼applique sans rechigner.</p>
<h3>Cas isolÃ©Â ?</h3>
<p>De nombreuses techniques ont vu le jour et nÊ¼ont vÃ©cu que pour WebKit. Je mÊ¼interroge doncÂ : parmi ces techniques que nous pensons rÃ©servÃ©es Ã  WebKit, <strong>combien dÊ¼autres encore ont atterri dans Edge discrÃ¨tementÂ ?</strong></p>
<h2>Et Windows Phone, on en parleÂ ğŸ˜„Â ?</h2>
<p>Et bienâ€¦ En quelque sorteÂ ! Pour clarifier, prÃ©cisons que jÊ¼utilise Windows Phone 8.1, qui embarque IE11. DÊ¼aprÃ¨s mes lectures sur le blog technique de Edge, ce mÃ©canisme dÊ¼interprÃ©tation des prÃ©fixes vendeurs <code>-webkit-</code> nÊ¼est inclus que dans Edge â€”Â en tout cas, il nÊ¼y est fait aucune mention du cousin IE11.</p>
<p>Figurez-vous que <strong>cÊ¼est pourtant le cas</strong> (je suis sÃ»r que vous nÊ¼avez rien vu venir, avec mes gros sabotsÂ ğŸ˜‡). Enfinâ€¦ <strong>Presque</strong>.</p>
<h3>Le cas qui pique</h3>
<p><a href="https://www.ffoodd.fr/ie9-sur-wp7-et-font-face-je-taime-moi-non-plus/">Une fois nÊ¼est pas coutume</a>, Windows Phone et son IE reprÃ©sentent une configuration particuliÃ¨re. En lÊ¼occurrence, IE11 interprÃ¨te les valeurs <code>-webkit-linear-gradient(â€¦)</code> mais est incapable dÊ¼appliquer la valeur <code>text</code> pour la proriÃ©tÃ© <code>background-clip</code>. OupsÂ ğŸ™ˆÂ !</p>
<h2>Captures Ã  lÊ¼appui</h2>
<p>Dans un monde merveilleux et homogÃ¨ne, nous Â«Â devrionsÂ Â» voir ceciÂ :</p>
<p><figure class="wp-caption pa1 aligncenter" role="group" itemscope itemtype="http://schema.org/ImageObject"><img loading="lazy" decoding="async" id="attachment_1704" itemprop="contentURL" aria-describedby="wp-caption--attachment_1704" class="size-medium wp-image-1704" src="/images/2015/10/chrome-300x31.png" alt="Capture dÊ¼Ã©cran de Chrome" width="300" height="31" srcset="https://www.ffoodd.fr/wp-content/uploads/2015/10/chrome-300x31.png 300w, https://www.ffoodd.fr/wp-content/uploads/2015/10/chrome.png 708w" sizes="(max-width: 300px) 100vw, 300px" /><figcaption class="wp-caption-text pt1 small" id="wp-caption--attachment_1704" itemprop="description">Un arc-en-ciel incrustÃ© au texte en CSS, visible sur les navigateurs WebKit et Edge</figcaption></figure></p>
<p>Et, le cas Ã©chÃ©ant si votre navigateur est allergique aux arc-en-ciels, voici le rÃ©sultat attenduÂ :</p>
<p><figure class="wp-caption pa1 aligncenter" role="group" itemscope itemtype="http://schema.org/ImageObject"><img loading="lazy" decoding="async" id="attachment_1705" itemprop="contentURL" aria-describedby="wp-caption--attachment_1705" class="size-medium wp-image-1705" src="/images/2015/10/firefox-300x30.png" alt="Capture dÊ¼Ã©cran sur Firefox" width="300" height="30" srcset="https://www.ffoodd.fr/wp-content/uploads/2015/10/firefox-300x30.png 300w, https://www.ffoodd.fr/wp-content/uploads/2015/10/firefox.png 706w" sizes="(max-width: 300px) 100vw, 300px" /><figcaption class="wp-caption-text pt1 small" id="wp-caption--attachment_1705" itemprop="description">Le texte est simplement blanc sur Firefox et IE, pas dÊ¼arc-en-ciel Ã  lÊ¼horizon</figcaption></figure></p>
<p>Jusque lÃ , tout va bien. La mÃ©canique est belle, aucun danger grÃ¢ce Ã  la solution de repli Ã©voquÃ©e prÃ©cÃ©demment. Maintenant, cassons toutÂ ! Voici le rendu sur IE11 <strong>et <i lang="en">UC Browser</i></strong> sur Windows Phone 8.1Â :</p>
<p><figure class="wp-caption pa1 aligncenter" role="group" itemscope itemtype="http://schema.org/ImageObject"><img loading="lazy" decoding="async" id="attachment_1706" itemprop="contentURL" aria-describedby="wp-caption--attachment_1706" class="size-medium wp-image-1706" src="/images/2015/10/windowsphone-300x169.jpg" alt="capture dÊ¼Ã©cran sur Windows Phone 8.1" width="300" height="169" srcset="https://www.ffoodd.fr/wp-content/uploads/2015/10/windowsphone-300x169.jpg 300w, https://www.ffoodd.fr/wp-content/uploads/2015/10/windowsphone-1024x576.jpg 1024w, https://www.ffoodd.fr/wp-content/uploads/2015/10/windowsphone.jpg 1280w" sizes="(max-width: 300px) 100vw, 300px" /><figcaption class="wp-caption-text pt1 small" id="wp-caption--attachment_1706" itemprop="description">Le texte est blanc, mais lÊ¼arriÃ¨re-plan arc-en-ciel est appliquÃ©</figcaption></figure></p>
<p>Difficile de garantir quoi que ce soit dans ces conditions. <i>A priori</i> ce problÃ¨me nÊ¼existe pas dans les versions antÃ©rieures de Windows Phone, et il faut noter que la version bureau dÊ¼IE11 nÊ¼applique pas lÊ¼arriÃ¨re-planÂ !</p>
<p>Si vous voulez tester par vous-mÃªmes ou complÃ©ter mes propos, nÊ¼hÃ©sitez pas Ã  dupliquer <a href="http://dabblet.com/gist/08fddf3666c39ebc62ca">mon dabblet</a>.</p>
<p>Et pour ceux qui rigolent dans le fond, sachez que <a href="http://gs.statcounter.com/#mobile_os-FR-monthly-201507-201509-bar">Windows Phone reprÃ©sente 4% de parts de marchÃ© des systÃ¨mes dÊ¼exploitation sur mobile en France, entre juillet et septembre 2015 (en anglais)</a>. Ce nÊ¼est pas nÃ©gligeable, si tant est quÊ¼on admette nÃ©gliger une population<sup aria-describedby="note-2" id="lien-2" data-note="Je mettrais dÊ¼ailleurs ma main a couper quÊ¼en rÃ©alitÃ© ce chiffre est dÃ©jÃ  sous-estimÃ©, Ã  en croire mes yeux de lynx qui officient dans le tramway, le bus ou le TER Ã  Nantes"><a class="scroll print-hidden" href="https://www.ffoodd.fr/le-web-en-kit/#note-2" title="Je mettrais dÊ¼ailleurs ma main a couper quÊ¼en rÃ©alitÃ© ce chiffre est dÃ©jÃ  sous-estimÃ©, Ã  en croire mes yeux de lynx qui officient dans le tramway, le bus ou le TER Ã  Nantes">[2]</a></sup>.</p>
