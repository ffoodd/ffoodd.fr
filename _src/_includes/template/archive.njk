{% extends "../base.njk" %}

{% block breadcrumb %}
	<nav role="navigation" aria-labelledby="here" class="print-hidden small mt2 mb1">
		<span id="here">Vous êtes ici&nbsp;: </span>
		<div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<a href="/" itemprop="url"><span itemprop="title">La vie en #ffoodd</span></a>
			<span> ›&nbsp;</span>
		</div><div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<a href="/journal/" itemprop="url"><span itemprop="title">Journal</span></a>
			{%- if pagination.pageNumber > 1 -%}
			<span> /&nbsp;</span>
		</div><div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<span itemprop="title">{{ pagination.pageNumber }}</span>
			{%- endif %}
		</div>
	</nav>
{% endblock %}

{% block content %}
	<ol class="ul-reset p-reset">
		{% for post in posts %}
			<li class="mb2 format-{{ post.data.format }}">
				{% include '../partials/format-' + post.data.format + '.njk' %}
			</li>
		{% endfor %}
	</ol>
	<ol class="ul-reset page-numbers">
		{% if pagination.href.previous %}
			<li><a href="{{ pagination.href.previous }}">←&nbsp;Page précédente</a></li>
		{% endif %}
		<li>
			<a href="{{ pagination.href.first }}"><span class="screen-reader-text">Page </span>1</a>
		</li>
		{%- for pageEntry in pagination.pages %}
			{%- if loop.index !== 1 and loop.index !== loop.length -%}
				<!-- @todo N’afficher que le current + 2 autour, et des … sinon -->
				<!-- @note current = pagination.pageNumber -->
				<li>
					<a href="{{ pagination.hrefs[ loop.index0 ] }}"
						{% if page.url == pagination.hrefs[ loop.index0 ] %} aria-current="page"{% endif %}>
						<span class="screen-reader-text">Page </span>{{ loop.index }}
					</a>
				</li>
			{%- endif %}
		{%- endfor %}
		<li>
			<a href="{{ pagination.href.last }}"><span class="screen-reader-text">Page </span>{{ pagination.pages.length }}</a>
		</li>
		{% if pagination.href.next %}
			<li><a href="{{ pagination.href.next }}">Page suivante&nbsp;→</a></li>
		{% endif %}
	</ol>
{% endblock %}
