@layer fonts, base, layout, design, animation, utilities, preferences;

@layer fonts {
	@font-face {
		font-display: swap;
		font-family: "Luckiest Guy";
		font-style: normal;
		font-weight: 400;
		src: url("./assets/fonts/LuckiestGuy-Regular.woff2") format("woff2");
	}

	@font-face {
		font-display: swap;
		font-family: "Zilla Slab";
		font-style: normal;
		font-weight: 400;
		src: url("./assets/fonts/ZillaSlab-Regular.woff2") format("woff2");
	}

	@font-face {
		font-display: swap;
		font-family: "Zilla Slab";
		font-style: italic;
		font-weight: 400;
		src: url("./assets/fonts/ZillaSlab-Italic.woff2") format("woff2");
	}

	@font-face {
		font-display: swap;
		font-family: "Zilla Slab";
		font-style: normal;
		font-weight: 700;
		src: url("./assets/fonts/ZillaSlab-Bold.woff2") format("woff2");
	}

	@font-face {
		font-display: swap;
		font-family: "Zilla Slab";
		font-style: italic;
		font-weight: 700;
		src: url("./assets/fonts/ZillaSlab-BoldItalic.woff2") format("woff2");
	}

	/* @todo Subset + unicode-range pour chaque niveau ? */
	@font-face {
		font-display: block;
		font-family: "Twemoji Mozilla";
		font-style: normal;
		font-weight: 400;
		src: local("Twemoji Mozilla"), url("./assets/fonts/Twemoji.woff2") format("woff2");
	}

	@font-face {
		font-display: swap;
		font-family: "FontWithASyntaxHighlighter";
		src: url("./assets/fonts/FontWithASyntaxHighlighter-Regular.woff2") format("woff2");
	}
}

@layer base {
	html:where([lang]) {
		--background: #231745;
		--foreground: #ffd529;
		--accent: lime;
		--muted: #767676;
		--white: #fff;
		--black: #000;
		--enter: cubic-bezier(0, 0.5, 0.5, 1);

		box-sizing: border-box;
		caret-color: var(--accent);
		color-scheme: dark;
		overflow-y: scroll;
		position: relative;
		text-size-adjust: none;
	}

	html:where([lang]):focus-within {
		scroll-behavior: smooth;
	}

	*,
	*::after,
	*::before {
		box-sizing: inherit;
	}

	body {
		background: var(--background);
		color: var(--foreground);
		font: normal 400 2rem/1.5 sans-serif;
		font-family: "Zilla Slab", system-ui, sans-serif;
		margin: 0;
		min-block-size: 100vh;
		overflow-x: hidden;
		position: relative;
		-webkit-font-smoothing: subpixel-antialiased;
		text-rendering: optimizeSpeed;
	}

	::selection {
		background-color: var(--accent);
		color: var(--background);
		text-shadow: none;
	}

	::placeholder {
		color: var(--muted);
	}

	code,
	pre,
	video,
	svg {
		max-inline-size: 100%;
	}

	svg {
		fill: currentColor;
	}

	[hidden],
	[role="alert"]:empty {
		display: none;
	}

	a,
	input,
	button,
	select,
	summary,
	textarea,
	[tabindex="0"] {
		outline-offset: 1rem;
		transition: outline-offset 0.3s var(--enter);
	}

	:focus {
		outline-color: transparent;
	}

	:focus-visible {
		box-shadow: 0 0 0 0.125rem var(--background);
		isolation: isolate;
		outline: 0.125rem solid;
		outline-offset: 0.125rem;
	}

	a:not(.link--unstyled),
	button {
		background-color: transparent;
		border: 0.063rem solid;
		border-radius: 0.5rem;
		color: var(--accent);
		display: inline-flex;
		font: inherit;
		font-weight: bold;
		padding: 0.625rem 1rem;
		font-size: 1.125rem;
		text-decoration: none;
		touch-action: manipulation;
	}

	a:hover,
	button:hover {
		color: var(--foreground);
		cursor: pointer;
	}

	.link--unstyled {
		text-decoration: none;
	}

	a.link--filled {
		background-color: var(--accent);
		color: var(--background);
		border-color: var(--accent);
	}

	a.link--filled:hover {
		background-color: var(--foreground);
		border-color: var(--foreground);
	}

	a svg,
	button svg {
		pointer-events: none;
	}

	main {
		outline-color: transparent;
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		margin: 3rem 0 1.5rem;
		text-rendering: optimizelegibility;
		text-wrap: balance;
	}

	:is(h1, h2, h3, h4, h5, h6):first-child {
		margin-block-start: 0;
	}

	div,
	textarea {
		hyphens: auto;
		word-wrap: break-word;
	}

	p,
	li,
	dd {
		hyphenate-limit-chars: 6 3 2;
		hyphenate-limit-lines: 2;
		hyphenate-limit-last: always;
		hyphenate-limit-zone: 8%;
		hyphens: auto;
		text-wrap: pretty;
		word-wrap: break-word;
	}

	pre,
	code,
	var,
	samp,
	input,
	textarea {
		font-family: "FontWithASyntaxHighlighter", monospace;
		font-size: 1.25rem;
	}

	pre {
		hyphens: none;
		width: 100%;
		line-height: 1.5;
		margin: 0;
		overflow-x: auto;
		padding: 0;
		tab-size: 4;
		text-align: start;
		word-break: normal;
		word-spacing: normal;
		white-space: pre-wrap;
		word-wrap: break-word;
	}

	form {
		width: 100%;
	}

	form[method="dialog"] {
		display: flex;
		gap: 2rem;
		inline-size: 100%;
		justify-content: end;
	}

	form p {
		text-align: end;
	}

	input,
	textarea {
		background-color: color-mix(in srgb, var(--background) 90%, var(--white));
		inline-size: 100%;
		border: 0.063rem solid var(--black);
		font-size: 1.25rem;
		margin: 0.5rem 0;
		padding: 1rem 0.5rem;
		color: var(--white);
		border-radius: 0.5rem;
		caret-color: var(--white);
	}

	.social-links__sprite {
		background-image: url("../../../assets/img/ffeeeedd--sprite.svg");
		background-repeat: no-repeat;
		background-size: 6.75em 1.125em;
		border-radius: 50%;
		height: 1.125em;
		display: block;
		width: 1.125em;
	}

	.social-links__sprite--dribbble {
		background-position: 0 0;
	}

	.social-links__sprite--github {
		background-position: -1.125em 0;
	}

	.social-links__sprite--linkedin {
		background-position: -2.25em 0;
	}

	.social-links__sprite--rss {
		background-position: -3.375em 0;
	}

	.social-links__sprite--mastodon {
		background-position: -4.5em 0;
	}

	.social-links__sprite--codepen {
		background-position: -5.625em 0;
	}
}

@layer layout {
	body {
		display: grid;
		grid-template: 7rem auto / 1.5fr 1fr;
		height: 100vh;
		overflow: hidden;
	}

	body.splash {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		height: 100vh;
		overflow: hidden;
		place-content: center;
		grid-template: initial;
	}

	header {
		grid-area: 1 / 1 / 2 / 3;
		display: flex;
		width: 100%;
		justify-content: space-between;
		align-items: center;
		padding: 2rem;
		border: solid 0 var(--white);
		border-bottom-width: 0.063rem;
	}

	main {
		grid-area: 2 / 1 / span 2 / 2;
		padding: 2rem;
		border: solid 0 var(--white);
		border-right-width: 0.063rem;
		overflow-y: auto;
	}

	html {
		height: 100vh;
		overflow: hidden;
	}

	play-ground {
		grid-area: 2 / 2 / span 2 / 2;
		overflow: hidden;
		place-content: center;
		position: relative;
		background-repeat: no-repeat;
		background-position: center;
		background-size: cover;
	}

	play-ground[data-type="zombie"] {
		background-image: url(../jeu/assets/img/jeu/zombie.png);
	}

	play-ground[data-type="ghost"] {
		background-image: url(./assets/img/jeu/ghost.png);
	}

	play-ground[data-type="invaders"] {
		background-image: url(./assets/img/jeu/invaders.png);
	}

	play-ground[data-type="villain"] {
		background-image: url(./assets/img/jeu/villain.png);
	}

	play-ground[data-type="vampire"] {
		background-image: url(./assets/img/jeu/vampire.png);
	}

	play-ground[data-type="skull"] {
		background-image: url(./assets/img/jeu/skull.png);
	}

	mu-tant {
		aspect-ratio: 1;
		block-size: 6rem;
		display: inline-flex;
		place-content: center;
		position: absolute;
	}
}

@layer design {
	dialog[open] {
		background: var(--background);
		color: var(--white);
		max-inline-size: clamp(50vw, 100%, 35rem);
		border-radius: 0.5rem;
		padding: 2rem;
		display: flex;
		flex-direction: column;
		gap: 2rem;
	}

	dialog p {
		font-size: 1rem;
	}

	dialog::backdrop {
		backdrop-filter: grayscale(50%) blur(0.25rem);
	}

	dialog h2 {
		color: var(--foreground);
		font-family: "Luckiest Guy", system-ui, sans-serif;
	}

	/**
	 @link https://codepen.io/enbee81/pen/WNdKLBY
	 @link https://codepen.io/gayane-gasparyan/pen/vYmYMeV
	 @link https://codepen.io/argyleink/pen/MWoeoKV
	 */
	h1 {
		color: var(--accent);
		font-family: "Luckiest Guy", system-ui, sans-serif;
		font-size: 2.4rem;
		line-height: 1;
		transform: perspective(12rem) rotateY(24deg) rotateX(6deg);
		transform-origin: 0;
		margin: 0;
		padding: 0;
	}

	h1::first-line {
		color: var(--foreground);
		font-family: "Zilla Slab", system-ui, sans-serif;
		font-size: 1rem;
	}

	h2 {
		color: var(--accent);
		font-family: "Luckiest Guy", system-ui, sans-serif;
		font-size: 2rem;
		line-height: 1.2;
		padding: 2rem;
		margin: 0;
		padding: 0;
		white-space: nowrap;
		text-align: center;
		flex: 1;
	}

	h2::first-line {
		color: var(--white);
		font-family: "Zilla Slab", system-ui, sans-serif;
		font-size: 1.5rem;
	}

	.splash h1 {
		font-size: 13.8rem;
		transform: perspective(50rem) rotateY(48deg) rotateX(24deg) translateX(6.875rem);
		transform-origin: 50%;
	}

	.splash main {
		padding-block-start: 0;
		text-align: left;
		padding: 0;
		border-right-width: 0;
		overflow: hidden;
		color: var(--white);
		max-width: 38.75rem;
		font-size: 1.25rem;
	}

	.splash header {
		display: flex;
		justify-content: center;
		align-items: center;
		padding: 2rem;
		border-bottom-width: 0;
	}

	mu-tant,
	.splash h1::first-line {
		font-size: 6rem;
	}

	.carte {
		align-items: center;
		background-color: color-mix(in srgb, var(--background) 90%, var(--white));
		border-radius: 0.5rem;
		display: flex;
		gap: 2rem;
		margin-block-end: 4rem;
		padding: 1.5rem;
	}

	.portrait {
		aspect-ratio: 1;
		block-size: 4rem;
		font-size: 4rem;
		line-height: 1;
		margin: 0;
	}

	.description {
		line-height: 150%;
		margin: 0;
		font-size: 1.125rem;
		color: var(--white);
	}

	.social-links {
		display: flex;
		gap: 1rem;
		list-style-type: none;
		padding: 0;
		margin: 0;
	}

	.social-link {
		width: 1.125em;
		height: 1.125em;
		aspect-ratio: 1;
	}

	.social-link a {
		width: 1.125em;
		height: 1.125em;
		aspect-ratio: 1;
		overflow: hidden;
		display: inline-block;
		border-radius: 50%;
	}
}

@layer animation {
	@keyframes zombie {
		13% {
			transform: translateX(calc(12rem * var(--direction))) translateY(0);
		}
		26%,
		78% {
			transform: translateX(calc(12rem * var(--direction))) translateY(calc(12rem * var(--direction)));
		}
		39% {
			transform: translateX(calc(24rem * var(--direction))) translateY(calc(12rem * var(--direction)));
		}
		52% {
			transform: translateX(calc(24rem * var(--direction))) translateY(calc(24rem * var(--direction)));
		}
		65% {
			transform: translateX(calc(12rem * var(--direction))) translateY(calc(24rem * var(--direction)));
		}
		91% {
			transform: translateX(0) translateY(calc(12rem * var(--direction)));
		}
	}

	[type="zombie"] {
		--direction: 1;
		animation: zombie 48s steps(48, end) infinite;
		inset-block-start: clamp(0%, var(--placement, 50) * 1%, 100%);
		inset-inline-start: clamp(0%, var(--placement, 50) * 1%, 100%);
		transform: translateX(0) translateY(0);
	}

	[type="zombie"]:nth-child(odd) {
		--direction: -1;
		inset-inline-start: clamp(0%, var(--placement, 50) * 0.5%, 50%);
	}

	[type="zombie"]:nth-child(3n + 1) {
		inset-inline-start: clamp(50%, var(--placement, 50) * 1%, 100%);
		scale: 0.75;
	}

	[type="zombie"]:nth-child(4n + 1) {
		inset-block-start: clamp(0%, var(--placement, 50) * 0.5%, 50%);
	}

	[type="zombie"]:nth-child(5n + 1) {
		inset-block-start: clamp(50%, var(--placement, 50) * 1%, 100%);
		scale: 0.5;
	}

	[type="zombie"]:nth-child(6n + 1) {
		inset-inline-start: clamp(50%, var(--placement, 50) * 1%, 100%);
	}
}

@layer utilities {
	.no-margin {
		margin: 0;
	}

	.sr-only {
		border: 0;
		clip-path: inset(50%);
		height: 1px;
		margin: -1px;
		overflow: hidden;
		padding: 0;
		position: absolute;
		width: 1px;
		white-space: nowrap;
	}
}

@layer preferences {
}
