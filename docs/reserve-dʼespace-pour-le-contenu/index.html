<!doctype html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>RÃ©serve dâ€™espace pour le contenu â€” La vie en #ffoodd</title>
		<meta name="description" content="Cet effet consiste Ã  utiliser en guise d&amp;#700;indicateur de chargement un Ã©lÃ©ment graphique ayant les mÃªmes caractÃ©ristiques visuelles que le contenu en cours de chargement. ">
		<link rel="icon" href="/favicon.svg" type="image/svg+xml">
		<link rel="stylesheet" href="/assets/styles.min.css" media="all">
		<link rel="stylesheet" href="/assets/impression.min.css" media="print">
		<!-- @todo Ajouter le flux RSS
			<link rel="alternate" type="application/rss+xml" title="La vie en #ffoodd | Flux RSS" href="/feed/">
		--></head>
	<body class="tk-museo-slab" itemscope itemtype="https://schema.org/WebPage">
		<a class="skip scroll pa1 inbl smaller print-hidden" href="#content">Aller au contenu</a>
		<div class="row">
			<nav class="col txtright pt8 w-33 pl0 pr0 print-hidden" id="nav" role="navigation">
				<ul class="menu aside p-reset m-reset ul-reset">
					<li class="tk-bello-pro h1-like m-reset">
						<a href="/">ffoodd</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/plus/">Ã€ propos</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/journal/">Journal</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/travaux/">Parcours</a>
					</li>
				</ul>
			</nav>

			<main class="col w--site pl3 pb3 pr5" id="content" role="main" role="main" itemprop="mainContentOfPage">
				<div class="logo print-hidden">
					<img src="/assets/img/embossed-ffoodd.png" alt="La vie en #ffoodd" id="logo" width="144" height="144">
				</div>
				<article role="article" itemscope itemtype="https://schema.org/Article">
				
					<header class="center pt1 mb1" role="banner">
						<h1 class="mb0 mt0 tk-bello-pro" itemprop="name">RÃ©serve dâ€™espace pour le contenu</h1>
						
	<nav role="navigation" aria-labelledby="here" class="print-hidden small mt2 mb1">
		<span id="here">Vous Ãªtes ici&nbsp;: </span>
		<div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<a href="/" itemprop="url"><span itemprop="title">La vie en #ffoodd</span></a>
			<span> â€º&nbsp;</span>
		</div><div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<a href="/journal/" itemprop="url"><span itemprop="title">Journal</span></a>
			<span> â€º&nbsp;</span>
		</div><div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
			<span itemprop="title">RÃ©serve dâ€™espace pour le contenu</span>
		</div>
	</nav>

						
							<h2 class="h3-like description" itemprop="description">Cet effet consiste Ã  utiliser en guise d&#700;indicateur de chargement un Ã©lÃ©ment graphique ayant les mÃªmes caractÃ©ristiques visuelles que le contenu en cours de chargement. </h2>
						
					</header>
					
	<time class="screen-reader-text" datetime="2015-12-03T12:30:49" itemprop="datePublished">3 dÃ©cembre 2015</time><div itemprop="articleBody">
		<p>Câ€™est ce quÊ¼utilisent notamment Facebook et Medium, dont le contenu respecte un gabarit constant. En terme dÊ¼interface, Ã§a me semble <strong>vraiment plus agrÃ©able</strong> que le classique <em>ouroboros</em>.</p>
<p>Et figurez-vous que pour le moment, tous <strong>les retours sont extrÃªmement positifs</strong>. En session de test utilisateurs, la plupart des testeurs lÊ¼ont remarquÃ© et ont tenu Ã  le signaler comme un Ã©lÃ©ment Â«Â trÃ¨s agrÃ©ableÂ Â». Moi qui pensait mÊ¼amuser Ã  suivre un effet de mode Ã  la mords-moi-le-nÅ“ud et Ãªtre passÃ© du cÃ´tÃ© obscur de la Force, me voilÃ  confondu. Cet effet semble confÃ©rer une rÃ©elle valeur ajoutÃ©e Ã  <strong>lÊ¼expÃ©rience utilisateur</strong>, alors jÊ¼aie envie de vous montrer ce quÊ¼il y a sous le capot afin de partager et dÊ¼amÃ©liorer encore tout Ã§a.</p>
<h2 id="quelques-recherches-pour-d%C3%A9marrer" tabindex="-1">Quelques recherches pour dÃ©marrer</h2>
<p>Bon, bizarrement, je nÊ¼ai pas trouvÃ© beaucoup de ressources pour faire ce truc. La plus visible est <a href="http://codepen.io/Mestika/pen/ByNYBa">une expÃ©rimentation sur codePen</a> qui est franchement sale. Une soupe de <code>div</code>, chacune positionnÃ©e en absolu et calÃ©e au pixel prÃ¨s. En revanche lÊ¼article de lÊ¼apprenti magicien est <strong>relativement</strong> intÃ©ressantÂ : Â«Â <a href="http://cloudcannon.com/deconstructions/2014/11/15/facebook-content-placeholder-deconstruction.html"><em>Facebook content placeholder deconstruction</em></a>Â Â». TrÃ¨s relativement, hein. Ã‡a manque cruellement de rÃ©fÃ©rence donc si vous avez, elles mÊ¼intÃ©ressentÂ !</p>
<p>En revanche il lie un autre article un peu plus intÃ©ressant qui aborde le sujet de lÊ¼expÃ©rience utilisateurÂ : Â«Â <a href="http://usabilitypost.com/2009/01/23/making-wait-times-feel-shorter/"><em>Making Wait Times Feel Shorter</em></a>Â Â» de Dmitry Fadeyev. JÊ¼en retiens surtout la derniÃ¨re phraseÂ :</p>
<blockquote>
<p>This isnâ€™t just simple courtesy, watching the progress bar move makes time fly faster.</p>
</blockquote>
<p>Je traduis sommairementÂ : ce nÊ¼est pas une simple question de courtoisie, regarder lÊ¼indicateur de progression fait passer le temps plus vite. Ma foi, Ã§a a du sens. Dans cet article, lÊ¼auteur prÃ©conise Ã©galement de spÃ©cifier le dÃ©lai dÊ¼attente quand cÊ¼est possible afin que lÊ¼utilisateur <strong>sache Ã  quoi sÊ¼attendre</strong>. Et bien cet effet de faux contenu en attendant le contenu rÃ©el donne une indication plus prÃ©cise du format de donnÃ©es que lÊ¼on attend et nous permet dÊ¼<strong>anticiper la lecture du contenu</strong> et de <strong>nous projeter dans son parcours</strong>.</p>
<h2 id="faire-plus-simple" tabindex="-1">Faire plus simple</h2>
<h3 id="utiliser-un-%C3%A9l%C3%A9ment-graphique" tabindex="-1">Utiliser un Ã©lÃ©ment graphique</h3>
<p>Tout Ã§a est bien joli, mais niveau code cÊ¼est quand mÃªme assez moyen (Ã  mon goÃ»t en tout cas). Par exemple nous parlons ici dÊ¼un effet purement graphique â€”Â voire esthÃ©tiqueÂ â€” alors pourquoi utiliser des Ã©lÃ©ments HTML pour le fabriquerÂ ? Un Ã©lÃ©ment graphique semble plus adaptÃ©, et Ã´ comble de joie il est possible dÊ¼utiliser des images en HTML depuis 1994.</p>
<h3 id="pr%C3%A9voir-une-alternative" tabindex="-1">PrÃ©voir une alternative</h3>
<p>CÊ¼est un <strong>visuel porteur dÊ¼informations</strong>, et Ã  ce titre il doit disposer dÊ¼une <strong>alternative textuelle pertinente</strong>. Je vous laisse (re)lire le critÃ¨re associÃ© du RGAA qui, comme pour tÃ©moigner de son importance, porte le doux nom de <a href="http://references.modernisation.gouv.fr/referentiel-technique-0#title-critre-11-a-chaque-image-a-t-elle-une-alternative-textuelle-">critÃ¨re 1.1</a>. Ce point nÊ¼est <em>a priori</em> pas trÃ¨s complexe Ã  mettre en Å“uvre.</p>
<h3 id="faire-passer-le-temps" tabindex="-1">Faire passer le temps</h3>
<p>Il ne faudrait pas omettre que lÊ¼objectif est avant tout de faire patienter lÊ¼utilisateur de la maniÃ¨re la plus agrÃ©able possible. Pour cela nous Ã©vitons le (trÃ¨s frustrant) petit disque qui tourne en rond, cÊ¼est dÃ©jÃ  bien. Mais <strong>si lÊ¼expÃ©rience peut sÊ¼avÃ©rer agrÃ©able</strong>, ce serait encore mieuxÂ ! Ã€ cette unique fin, je vais suivre les exemples de Facebook et Medium qui ont mis en place un effet de balayage lumineux afin de cadencer le temps dÊ¼attente.</p>
<h2 id="super-!-%C3%A7a-donne-quoi-%3F" tabindex="-1">SuperÂ ! Ã‡a donne quoiÂ ?</h2>
<h3 id="cr%C3%A9er-l%CA%BCimage-d%CA%BCattente" tabindex="-1">CrÃ©er lÊ¼image dÊ¼attente</h3>
<p>Pour dÃ©marrer, on va choisir un contenu quÊ¼on pourrait attendre. JÊ¼en ai choisi un assez connu et avec un gabarit familier et reconnaissableÂ : la carte de profil sur Twitter.</p>
<figure><img src="/images/2015/12/profil-twitter-300x202.png" alt="Ma carte de profil sur Twitter" loading="lazy"><figcaption>La carte de profil indique le nom, le pseudonyme et lâ€™avatar Twitter, mais aussi les nombres de tweets, dâ€™abonnements et dâ€™abonnÃ©s.</figcaption></figure>
<p>CÊ¼est donc la-dessus que va se baser la crÃ©ation du visuel dÊ¼attente. Sur le principe, je me contente de crÃ©er un bloc en aplat gris par Ã©lÃ©ment, afin de <strong>reprÃ©senter sa masse visuelle</strong>.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<p><img src="/images/2015/12/twitter-placeholder-300x201.png" alt="Gabarit de carte de profil twitter">â†”&quot;Gabarit de carte de profil twitter reprÃ©sentÃ© en masses colorÃ©es&quot;)</p>
<p>Bon, jÊ¼admets Ã©galement avoir exportÃ© un SVG plutÃ´t quÊ¼une bÃªte image bitmap. Pour tout vous dire Ã§a nÊ¼est pas nÃ©cessairement le meilleur choix, Ã©tant donnÃ© que pour une image aussi simple <strong>le SVG est plus lourd</strong> quÊ¼un PNG bien optimisÃ© et quÊ¼<strong>on perd nÃ©cessairement en support navigateur</strong>.</p>
<h3 id="impl%C3%A9menter-une-alternative-accessible" tabindex="-1">ImplÃ©menter une alternative accessible</h3>
<p>Pour celui-ci aucun mÃ©rite, puisque lÊ¼accessibilitÃ© des SVG commence Ã  Ãªtre bien documentÃ©e. Je vous laisse farfouiller un peu les artÃ¨res du web pour trouver votre bonheur â€”Â personnellement jÊ¼ai abouti Ã  ceciÂ :</p>
<pre><code class="language-markup">
&lt;svg viewBox=&quot;0 0 320 215&quot; width=&quot;320&quot; height=&quot;215&quot;
   aria-labelledby=&quot;title desc&quot; role=&quot;img&quot;
   xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt; 
  &lt;title id=&quot;title&quot;&gt;Chargement en coursâ€¦&lt;/title&gt;
  &lt;desc id=&quot;desc&quot;&gt;La carte de profil est en chemin !&lt;/desc&gt;
  &lt;path role=&quot;presentation&quot; d=&quot;â€¦&quot; /&gt;
&lt;/svg&gt;
</code></pre>
<p>Je vous passe les dÃ©tails sordides des multiples <code>&lt;path&gt;</code> dans le SVG, vous pourrez jouer avec dans la dÃ©mo â€”Â et accessoirement, cÊ¼est une partie que vous devrez personnaliser, doncâ€¦ Mais normalement ce magnifique assortiment de <code>&lt;title&gt;</code> et <code>&lt;desc&gt;</code> liÃ©s au SVG <em>via</em> <code>aria-labelledby</code> fait lÊ¼affaire et rend le tout intelligible.</p>
<h3 id="impl%C3%A9menter-une-animation" tabindex="-1">ImplÃ©menter une animation</h3>
<h4 id="on-est-dans-du-svg" tabindex="-1">On est dans du SVG</h4>
<p>Ã€ lÊ¼aube du premier jour, jeune et fougueux que jÊ¼Ã©tais, je me suis dit Â«Â Yay, dans du SVG, je vais enfin pouvoir jouer avec SMILÂ Â». <em>Que nenni</em>Â !</p>
<p>Deux (plutÃ´t) bonnes raisons de sÊ¼en dispenserÂ :</p>
<ol>
<li><a href="http://caniuse.com/#search=SMIL">Le support est trÃ¨s moyen</a>, notamment absent des navigateurs MicrosoftÂ ;</li>
<li>Chrome et OpÃ©ra lancent (depuis deux ou trois versions) une alerte dans la console lorsquÊ¼on utilise SMIL, quÊ¼ils considÃ¨rent dÃ©prÃ©ciÃ© et dont ils vont abandonner le support un beau matin.</li>
</ol>
<p>Ã‡a nÊ¼est guÃ¨re glorieux, mÃªme si <a href="http://designmodo.com/animate-svg-gradients/">un charmant tutoriel en anglais</a> me montrait quÊ¼on pouvait facilement animer un dÃ©gradÃ© en remplissage dÊ¼un SVG. Dommage.</p>
<h4 id="mais-on-fait-du-css" tabindex="-1">Mais on fait du CSS</h4>
<p>CÊ¼est donc finalement vers les animations CSS que je dois me tourner. CÊ¼est moins rigolo puisque je connais dÃ©jÃ , mais au moins <a href="http://caniuse.com/#search=animation">le support est excellent</a>.</p>
<p>En revanche <strong>impossible dÊ¼animer <em>via</em> CSS le remplissage dÊ¼un SVG</strong>. Le SVG sera donc rempli en aplat, et il va falloir se dÃ©brouiller autrement pour lÊ¼effet de balayage. VoilÃ  comment jÊ¼ai rÃ©ssolu la choseÂ :</p>
<ul>
<li>un dÃ©gradÃ© linÃ©aire allant du transparent au transparent â€”Â afin de profiter du merveilleux SVG derriÃ¨reÂ â€” en passant par une Ã©tape de blanc pour apporter la lumiÃ¨re en ce bas-mondeÂ ;</li>
<li>une dimension dÊ¼arriÃ¨re-plan pour ajuster la mise en scÃ¨ne du dÃ©gradÃ©Â ;</li>
<li>et finalement, une animation dont la seule prÃ©occupation est de dÃ©placer lÊ¼arriÃ¨re-plan.</li>
</ul>
<p>CÊ¼est donc un poil plus complexe que de simplement remplir le SVG avec un dÃ©gradÃ© qui sÊ¼anime tout seul, mais bonÂ ! En revanche il ne vous aura probablement pas Ã©chappÃ© quÊ¼il nous faut cette animation <strong>devant</strong> le SVG. Et pour cela un pseudo-Ã©lÃ©ment serait fort agrÃ©able. Malheureusement <a href="https://github.com/ffoodd/a11y.css/blob/master/README-fr.md#cas-particuliers-et-probl%C3%A8mes-connus">SVG est un Ã©lÃ©ment remplacÃ©</a>, ce qui empÃªche de lui appliquer un pseudo-Ã©lÃ©ment. Pour pouvoir implÃ©menter lÊ¼animation, il nous faut donc un Ã©lÃ©ment conteneur qui portera le pseudo-Ã©lÃ©ment (ce mÃªme conteneur qui pourrait fort bien vous servir dans un contexte adaptatif ou simplement pour la mise en page).</p>
<h2 id="la-d%C3%A9monstration" tabindex="-1">La dÃ©monstration</h2>
<p>En supposant que vous utilisez une division comme conteneur, voici les styles du pseudo-Ã©lÃ©mentÂ :</p>
<pre><code class="language-css">
div::after {
  animation: placeholder 2s linear infinite;
  background-image: 
  linear-gradient( 
  110deg, 
  rgba( 255, 255, 255, 0) 10%, 
  rgba( 255, 255, 255, .33) 30%, 
  rgba( 255, 255, 255, 0) 60% 
  );
  background-size: 20em 13.4375em;
  bottom: 0;
  content: &quot;&quot;;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  z-index: 2;
}
</code></pre>
<p>Un dÃ©tail peut vous surprendreÂ : je nÊ¼utilise pas le mot-clÃ© <code>transparent</code> mais la notation <code>rgba( 255, 255, 255, 0 )</code>. Peut-Ãªtre le savez-vous dÃ©jÃ  mais le mot-clÃ© qui semble dÃ©finir la transparence est en rÃ©alitÃ© une notation raccourcie de <code>rgba( 0, 0, 0, 0 )</code>, <a href="http://www.w3.org/TR/css3-color/#transparent">comme le prÃ©cise la spÃ©cification du module Â«Â CouleursÂ Â» de CSS3</a>. Ã‡a nÊ¼a lÊ¼air de rien comme Ã§a, mais Ã§a a son importance si vous appliquez un dÃ©gradÃ© â€”Â disons du blanc au transparent, par exempleÂ â€” et que vous regardez le rÃ©sultat sur SafariÂ : il interpole le dÃ©gradÃ© en tendant vers le noir (ce qui est relativement logique) et vous donne donc un intermÃ©diaire immonde entre votre blanc nacrÃ© et votre transparence parfaite. Un gros pÃ¢tÃ© noir, quoi. <strong>Bref, cÊ¼est moche</strong>. Utiliser le blanc avec une opacitÃ© nulle rÃ©sout facilement ce travers.</p>
<p>Ensuite pour animer le dÃ©gradÃ©, cÊ¼est plutÃ´t simple puisque vous avez dÃ©jÃ  vu lÊ¼appel Ã  lÊ¼animation <code>placeholder</code>, pour une durÃ©e de deux secondes et en boucle. Elle se contente de dÃ©placer le fond dÊ¼une distance Ã©quivalente Ã  la largeur du bloc, afin de gÃ©nÃ©rer une vÃ©ritable boucle visuelle.</p>
<pre><code class="language-css">
@keyframes placeholder {  
  from { 
  background-position: -10em 0; 
  } to { 
  background-position: 10em 0; 
  }
}
</code></pre>
<p><strong>Et voilÃ Â !</strong></p>
<p>Si vous souhaitez jouer avec ou le reprendre, <a href="http://dabblet.com/gist/466b6a47db1b4ac14ecb">vous trouverez le tout sur Dabblet</a>. Rien de bien complexe, mais cÊ¼est tellement simple et efficace quÊ¼il serait dommage de sÊ¼en priverÂ ğŸ˜‡</p>
<ol class="footnotes-list small mt2 pt2 pb2">
<li id="fn1" class="footnote-item"><p>CÊ¼est le mÃªme principe que le gris typographique en composition de page. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p>
</li>


	</div>
	<footer class="small mt2">
		<p class="pl2 mt0 pt1">
			Article rÃ©digÃ© par <strong itemprop="author"><span class="fn">GaÃ«l Poupard</span></strong>.
			ModifiÃ© le <time class="updated" datetime="2015-12-09T09:28:45" itemprop="dateModified">9 dÃ©cembre 2015</time>.
		</p>
	</footer>

				</article>
				
				
			</main>

			
	<aside class="col pt8 pl0 pr0 print-hidden" role="complementary" id="sommaire">
		<div class="aside pl2 pt2">
			<h3 class="tk-bello-pro h2-like m-reset">Sommaire</h3>
			<div class="textwidget">
				<ol><li><a href="#quelques-recherches-pour-d%C3%A9marrer">Quelques recherches pour dÃ©marrer</a></li><li><a href="#faire-plus-simple">Faire plus simple</a></li><li><a href="#super-!-%C3%A7a-donne-quoi-%3F">SuperÂ ! Ã‡a donne quoiÂ ?</a></li><li><a href="#la-d%C3%A9monstration">La dÃ©monstration</a></li></ol>
			</div>
		</div>
	</aside>

		</div>
		<footer class="mw--site mod txtcenter center" role="contentinfo" itemscope itemtype="https://schema.org/Person">
			<ul class="ffeeeedd--contact ul-reset p-reset mt0 print-hidden">
				<!-- @todo Fichier json pour les rÃ©seaux ? -->
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__mastodon" href="https://mamot.fr/@ffoodd" itemprop="url" title="GaÃ«l Poupard sur Mastodon">
						<span itemprop="name">Mastodon</span>
					</a>
				</li>
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__github" href="https://github.com/ffoodd" itemprop="url" title="GaÃ«l Poupard sur GitHub">
						<span itemprop="name">GitHub</span>
					</a>
				</li>
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__dribble" href="https://dribbble.com/ffoodd" itemprop="url" title="GaÃ«l Poupard sur Dribbble">
						<span itemprop="name">Dribbble</span>
					</a>
				</li>
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__linkedin" href="https://www.linkedin.com/pub/ga%C3%ABl-poupard/30/17b/401" itemprop="url" title="GaÃ«l Poupard sur LinkedIn">
						<span itemprop="name">LinkedIn</span>
					</a>
				</li>
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__behance" href="https://www.behance.net/ffoodd" itemprop="url" title="GaÃ«l Poupard sur Behance">
						<span itemprop="name">Behance</span>
					</a>
				</li>
				<li class="inbl pa1" itemscope itemprop="contactPoint">
					<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__rss" href="/feed/" itemprop="url" title="La vie en #ffoodd | Flux RSS">
						<span itemprop="name">RSS</span>
					</a>
				</li>
			</ul>

			<small>
				&copy; 2018 La vie en #ffoodd &mdash; Design et intÃ©gration par <span itemprop="name">GaÃ«l Poupard</span> &mdash; <a href="/mentions-legales/">Mentions lÃ©gales</a>
				<br />
				Sauf mention contraire, lâ€™ensemble du contenu est sous <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/">Licence <abbr lang="en" title="Creative Commons">CC</abbr> <abbr lang="en" title="Attribution">BY</abbr>-<abbr lang="en" title="Non Commercial">NC</abbr>-<abbr lang="en" title="Share Alike">SA</abbr></a>.
			</small>

			<meta itemprop="jobTitle" content="Webdesigner et intÃ©grateur web">
			<meta itemprop="worksFor" content="onepoint">
		</footer>
		<script src="/assets/script.min.js"></script>
	</body>
</html>
