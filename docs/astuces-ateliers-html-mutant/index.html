<!doctype html>
<html lang="fr-FR">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Les astuces derriÃ¨re Â«&amp;nbsp;lâ€™Invasion du HTML mutant&amp;nbsp;Â» â€” La vie en #ffoodd</title>
		<link rel="preload" as="font" href="/assets/fonts/bello-pro.woff2">
		<link rel="preload" as="font" href="/assets/fonts/museo-slab-300.woff2"><link rel="stylesheet" href="/assets/styles.min.css" media="all">
		<link rel="stylesheet" href="/assets/impression.min.css" media="print">
		<meta name="description" content="Le 17 octobre dernier, jâ€™animais au devFest Nantes un atelier intitulÃ© Â«&amp;nbsp;Lâ€™Invasion du HTML mutant&amp;nbsp;Â».">
		<meta name="generator" content="Eleventy v3.0.0">
		<link rel="icon" href="/favicon.ico" sizes="32x32">
		<link rel="icon" href="/favicon.svg" type="image/svg+xml">
		<link rel="author" href="/humans.txt" type="text/plain">
		<meta property="fediverse:creator" content="@ffoodd@mamot.fr">
		<link rel="alternate" type="application/rss+xml" title="La vie en #ffoodd | Flux RSS" href="/feed/index.xml">
	</head>
	<body class="tk-museo-slab" itemscope itemtype="https://schema.org/WebPage">
	<a class="skip scroll pa1 inbl smaller print-hidden" href="#content">Aller au contenu</a>
	<a class="skip scroll pa1 inbl smaller print-hidden" href="#sommaire">Aller au sommaire</a>
		<div class="row">
			<nav class="col txtright pt8 w-33 pl0 pr0 print-hidden" id="nav" role="navigation" aria-label="Menu principal">
				<ul class="menu aside p-reset m-reset ul-reset">
					<li class="tk-bello-pro h1-like m-reset">
						<a href="/">ffoodd</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/journal/">Journal</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/travaux/">Parcours</a>
					</li>
					<li class="h3-like m-reset">
						<a href="/now/">En ce moment</a>
					</li>
				</ul>
			</nav>

			<main class="col w--site pl3 pb3 pr3" id="content" role="main" role="main" itemprop="mainContentOfPage">
				<div class="logo print-hidden">
					<img src="/assets/img/embossed-ffoodd.png" alt="" id="logo" width="144" height="144">
				</div>
				<header class="center pt1 mb1" role="banner">
					<h1 class="mb0 mt0 tk-bello-pro" itemprop="name">Les astuces derriÃ¨re Â«&nbsp;lâ€™Invasion du HTML mutant&nbsp;Â»</h1>
						<nav role="navigation" aria-labelledby="here" class="print-hidden small mt2 mb1">
	<span id="here">Vous Ãªtes ici&nbsp;: </span>
	<div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
		<a href="/" itemprop="url"><span itemprop="title">La vie en #ffoodd</span></a>
		<span> â€º&nbsp;</span>
	</div>
	<div class="inbl" itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
		<span itemprop="title">Les astuces derriÃ¨re Â«&nbsp;lâ€™Invasion du HTML mutant&nbsp;Â»</span>
	</div>
</nav>

						<h2 class="h3-like description" itemprop="description">Le 17 octobre dernier, jâ€™animais au devFest Nantes un atelier intitulÃ© Â«&nbsp;Lâ€™Invasion du HTML mutant&nbsp;Â».</h2>
				</header>
	<article role="article" itemscope itemtype="https://schema.org/Article">
		<time class="screen-reader-text" datetime="2024-11-18" itemprop="datePublished">18 novembre 2024</time>
			<div itemprop="articleBody">
				<p>Un atelier devant par dÃ©finition impliquer les participants, jâ€™ai fait le choix de crÃ©er un mini-jeu en guise de support. Câ€™est <a href="https://www.ffoodd.fr/devfest.2024/jeu/">un site statique disponible en ligne</a>, <a href="https://github.com/ffoodd/html-mutant">open-sourcÃ© sur GitHub</a> â€”Â pour que vous puissiez lâ€™amÃ©liorerÂ !</p>
<p>Quand je dis statique, câ€™est statiqueÂ : le dÃ©pÃ´t a une unique dÃ©pendance, <a href="https://github.com/lukejacksonn/servor">servor</a>, chargÃ©e de fournir un serveur HTTP basique pour travailler en localÂ  et servor nâ€™a elle-mÃªme aucune dÃ©pendance. Le reste nâ€™est que HTML, CSS et JavaScript.</p>
<p>Ã‡a mâ€™a permis de revenir aux fondamentaux, considÃ©rablement gagner en efficienceÂ ; mais surtoutâ€¦ dÃ©couvrir tout un tas de trucs et astucesÂ !</p>
<h2 id="la-mecanique-du-jeu" tabindex="-1">La mÃ©canique du jeu</h2>
<p>En dÃ©marrant le jeu, vous commencerez par personnaliser votre personnage. Le seul objectif de cette Ã©tape est de dÃ©couvrir la structure visuelle dâ€™un niveau, en vous permettant de vous impliquer personnellement dans le jeu. Les valeurs choisies seront appliquÃ©es dÃ¨s que possible Ã  tous les personnages du jeu, dans une sorte de reprÃ©sentation en miroir.</p>
<p>AprÃ¨s avoir choisi votre personnage, un niveau dâ€™entraÃ®nement vous familiarise avec la mÃ©canique trÃ¨s simple du jeuÂ : une portion de code Ã  complÃ©ter et soumettre, exÃ©cutÃ©e en direct, qui affecte la zone envahie progressivement par des mutantsÂ ! Ce code est dans la plupart des niveaux les options passÃ©es Ã  un <code>mutationObserver</code>, mais parfois aussi dans la fonction de rappel.</p>
<p>En cas dâ€™Ã©chec comme en cas de rÃ©ussite, une fenÃªtre modale vous informera. Parlons-en, de cette fenÃªtre modaleÂ !</p>
<h2 id="les-particularites-de-dialog" tabindex="-1">Les particularitÃ©s de <code>&lt;dialog&gt;</code></h2>
<p>Jâ€™en parlais <a href="https://www.paris-web.fr/2022/conferences/decouvrez-le-bon-html-et-economisez-du-js-et-du-css.php">en 2022 Ã  Paris Web</a> puis <a href="https://devfest2022.gdgnantes.com/sessions/decouvrez_le_bon_html_et_economisez_du_js_et_du_css">au devFest Nantes</a> dans mon sujet Â«Â <a href="https://www.ffoodd.fr/devfest/#slide-1">DÃ©couvrez &quot;Â le bon HTMLÂ &quot; et Ã©conomisez du JS et du CSSÂ </a>Â», <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/dialog">lâ€™Ã©lÃ©ment <code>&lt;dialog&gt;</code></a> est extrÃªmement intÃ©ressant et devrait Ã  terme supplanter toutes les implÃ©mentations de fenÃªtres modales dans les diffÃ©rentes bibliothÃ¨ques de composants.</p>
<p>Dans lâ€™atelier, je mâ€™en sers en plusieurs endroitsÂ :</p>
<ol>
<li>pour afficher les rÃ¨gles du jeu dans lâ€™Ã©cran dâ€™accueilÂ ;</li>
<li>pour interrompre un niveau, quand le nombre de mutants dÃ©passe la centaineÂ ;</li>
<li>pour informer dâ€™un Ã©chec lors dâ€™une soumission de code qui ne fonctionne pasÂ ;</li>
<li>pour informer de la rÃ©ussite, dans le cas contraire â€”Â et permettre de passer au niveau suivant.</li>
</ol>
<h3 id="ouvrir-la-fenetre" tabindex="-1">Ouvrir la fenÃªtre</h3>
<p>La plupart sont ouvertes programmatiquement, en rÃ©action Ã  un Ã©vÃ©nement. Rien de plus simpleÂ : il suffit de rÃ©cupÃ©rer une rÃ©fÃ©rence Ã  lâ€™Ã©lÃ©ment <code>&lt;dialog&gt;</code> Ã  lâ€™aide de <code>querySelector()</code> ou une rÃ©fÃ©rence Ã  un identifiant via lâ€™accÃ¨s aux propriÃ©tÃ©s nommÃ©es, ou <a href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#named-access-on-the-window-object:html-elements-2"><i lang="en">named properties access</i> (en anglais)</a>, et dâ€™invoquer <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/showModal">la mÃ©thode <code>showModal()</code> (sur MDN, en anglais)</a>.</p>
<pre class="language-js" tabindex="0"><code class="language-js">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'dialog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h4 id="sans-java-script-externe" tabindex="-1">Sans JavaScript externe</h4>
<p>Une exception toutefois, pour Ã©viter dâ€™ajouter un Ã©couteur dâ€™Ã©vÃ©nement inutileÂ : la fenÃªtre des rÃ¨gles du jeu est invoquÃ©e grÃ¢ce Ã  un gestionnaire dâ€™Ã©vÃ©nement HTML <code>onclick</code>Â :</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript">rules<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>RÃ¨gles du jeu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dialog</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rules<span class="token punctuation">"</span></span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span> <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>RÃ¨gles du jeu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dialog</span><span class="token punctuation">></span></span></code></pre>
<h5 id="aparte-la-projection-des-identifiants-html-en-objets-globaux" tabindex="-1">ApartÃ©Â : la projection des identifiants HTML en objets globaux</h5>
<p>Dans cet exemple, jâ€™invoque lâ€™ouverture de la fenÃªtre modale avec <code>rules.showModal()</code>, sans avoir dÃ©fini la variable <code>rules</code>. Comment est-ce possibleÂ ? En rÃ©sumÃ©, tout Ã©lÃ©ment porteur dâ€™un attribut <code>id</code> devient mÃ©caniquement une propriÃ©tÃ© globale de lâ€™objet <code>window</code>, et devient donc accessible directement par son nom. Câ€™est spÃ©cifiÃ© sous le joli nom de <a href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#named-access-on-the-window-object"><i lang="en">Named Access on Window Object</i> (en anglais)</a>.</p>
<p>Câ€™est drÃ´lement pratique, nonÂ ? Figurez-vous que câ€™est aussi un vecteur dâ€™attaque mÃ©connu faisant partie dâ€™un groupe sobrement intitulÃ© <a href="https://domclob.xyz/"><i lang="en">DOM clobbering</i> (en anglais)</a>. Je vous encourage Ã  parcourir <a href="https://cheatsheetseries.owasp.org/cheatsheets/DOM_Clobbering_Prevention_Cheat_Sheet.html">les recommandations de lâ€™OWASP pour mitiger le <i lang="en">DOM clobbering</i> (en anglais)</a>.</p>
<h4 id="accessibilite" tabindex="-1">AccessibilitÃ©</h4>
<p>La mÃ©thode <code>showModal()</code> permet dâ€™ouvrir une fenÃªtre modale, pas une simple boÃ®te de dialogue â€”Â en respectant les exigences en matiÃ¨re dâ€™accessibilitÃ©Â : la <i lang="en">focus</i> est mÃ©caniquement piÃ©gÃ© dedans, la fermeture est possible avec la touche <kbd>Ã‰chap</kbd>, etc.</p>
<h3 id="l-arriere-plan" tabindex="-1">Lâ€™arriÃ¨re-plan</h3>
<p>Une fois la fenÃªtre modale ouverte, on peut sâ€™appliquer Ã  la styler. LÃ  oÃ¹ moult bibliothÃ¨ques de composants imposent une <code>&lt;div&gt;</code> (voire plusieurs) pour servir dâ€™arriÃ¨re-plan Ã  la fenÃªtre, la version native est livrÃ©e avec <a href="https://developer.mozilla.org/fr/docs/Web/CSS/::backdrop">un pseudo-Ã©lÃ©ment <code>::backdrop</code></a> qui sâ€™Ã©tend naturellement sur tout le <i lang="en">viewport</i> et est promue, avec la fenÃªtre modale, par-dessus le reste de la page dans ce qui est spÃ©cifiÃ© sous le nom de <i lang="en">top layer</i>.</p>
<p>Vous nâ€™avez plus quâ€™Ã  lui appliquer une couleur, une opacitÃ© ou que sais-je encore. Dans le jeu, jâ€™ai utilisÃ© une propriÃ©tÃ© au nom Ã©vocateur de <a href="https://developer.mozilla.org/fr/docs/Web/CSS/backdrop-filter"><code>backdrop-filter</code></a> pour appliquer un effet de flou grisÃ© sur lâ€™arriÃ¨re-plan.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">dialog::backdrop</span> <span class="token punctuation">{</span>
	<span class="token property">backdrop-filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span> <span class="token function">blur</span><span class="token punctuation">(</span>.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h3 id="les-dimensions" tabindex="-1">Les dimensions</h3>
<p>Ne maÃ®trisant pas le mode de consultation du jeu, jâ€™ai utilisÃ© un peu de CSS moderne pour la largeur de la fenÃªtre modale afin quâ€™elle ait une largeur fluide, mais avec des valeurs minimum et maximum.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">dialog</span> <span class="token punctuation">{</span>
	<span class="token property">max-inline-size</span><span class="token punctuation">:</span> <span class="token function">clamp</span><span class="token punctuation">(</span>50vw<span class="token punctuation">,</span> 100%<span class="token punctuation">,</span> 67.5rem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>La propriÃ©tÃ©  <code>max-inline-size</code> est la <a href="https://developer.mozilla.org/fr/docs/Web/CSS/CSS_logical_properties_and_values">propriÃ©tÃ© logique</a> correspondant Ã  <code>max-width</code> dans le cas du FranÃ§ais. Et <a href="https://developer.mozilla.org/fr/docs/Web/CSS/clamp">la fonction <code>clamp()</code></a> est un petit bijou, dont jâ€™abuse dÃ©jÃ  copieusement dans <a href="https://ffoodd.github.io/chaarts/pie-charts.html">chaarts (en anglais)</a> pour obtenir un pseudo-boolÃ©en en CSS en fonction dâ€™une valeur, comme expliquÃ© <a href="https://www.ffoodd.fr/devquest/#slide-27">slide 27 de ma confÃ©rence Â«Â Dessine-moi un graphique (en CSS)Â Â»</a> donnÃ©e au <a href="https://devfest2023.gdgnantes.com/sessions/dessine_moi_un_graphique__en_css_/">devFest Nantes 2023</a>, <a href="https://2024.touraine.tech/talk/ioc2x2nW4KV5zrt69ZQm">TNT #24</a> et <a href="https://www.devquest.fr/sessions/dessine-moi-un-graphique-en-CSS">DevQuest 2024</a>.</p>
<h3 id="fermer-la-fenetre" tabindex="-1">Fermer la fenÃªtre</h3>
<p>Jâ€™ai Ã©voquÃ© la capacitÃ© de fermer la modale avec la touche <kbd>Ã‰chap</kbd>, mais lâ€™Ã©lÃ©ment <code>&lt;dialog&gt;</code> tire dâ€™autres super-pouvoirs du fait dâ€™Ãªtre natif, et notamment son association avec un Ã©lÃ©ment <code>&lt;form&gt;</code>. Câ€™est parfaitement naturel, puisquâ€™une fenÃªtre modale permet gÃ©nÃ©ralement de valider ou annuler une action associÃ©e Ã  une saisie.</p>
<p>Câ€™est pourquoi la valeur <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/form#method"><code>dialog</code> est ajoutÃ©e Ã  la <code>method</code></a> de soumission dâ€™un formulaire. Elle ne correspond pas Ã  une mÃ©thode HTTP comme <code>get</code> ou <code>post</code>, mais bien Ã  un contexte HTML, et permet de fermer directement la fenÃªtre modale parente. Lâ€™utilisation est fort simpleÂ :</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fermer<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dialog<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre>
<p>Et, pour revenir Ã  du HTML Ã  lâ€™ancienneÂ : saviez-vous quâ€™un bouton Ã  lâ€™autre bout du DOM peut soumettre un formulaireÂ ? Il suffit de lui indiquer le formulaire Ã  soumettreÂ :</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">form</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fermer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Fermer la fenÃªtre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre>
<p>Et voilÃ Â : câ€™est un bouton de type <code>submit</code> qui soumettra le formulaire avec lâ€™identifiant <code>fermer</code>, qui lui-mÃªme fermera la fenÃªtre de dialogue. Câ€™est beau, nonÂ ? Et <a href="https://www.w3.org/TR/2006/WD-web-forms-2-20060821/#formAttribute">cet attribut date (au moins) de 2006, dans les spÃ©cifications W3C des Web Forms (en anglais)</a> dont les premiers brouillons remontent Ã  2004â€¦</p>
<h2 id="les-emojis" tabindex="-1">Les Ã©mojis</h2>
<p>Pour cet atelier, jâ€™avais besoin de mÃ©chants envahisseurs, et de dÃ©cors. Clairement pas le temps de faire des illustrations Ã  la main, ni les moyens dâ€™acheter des visuels. Une quÃªte sur les internets mâ€™a appris que le type de visuels que je cherchais se nomme les <i lang="en">top down tileset</i>, ces petits dÃ©cors et personnages gÃ©nÃ©ralement en 8-bit avec une perspective Ã©crasÃ©e.</p>
<p>Ã€ force de regarder des visuels en 8-bit, jâ€™ai fini par faire le lien avec une vieille habitude dans mes supports de confÃ©rencesÂ : les Ã©mojis dÃ©coratifs en fin de titre. Bon sang, mais câ€™est bien sÃ»rÂ ! Des Ã©mojisÂ !</p>
<p>Les Ã©mojis sont formidables. Ce sont des points Unicode, purement textuels, et extrÃªmement nombreux dÃ©sormais avec des pelletÃ©es de nouveautÃ©s dans chaque version dâ€™Unicode. Il y a mÃªme des variantes, composÃ©es en sÃ©quenceÂ !</p>
<h3 id="les-personnages" tabindex="-1">Les personnages</h3>
<p>Le meilleur exemple de sÃ©quence Unicode Ã  mon avis sont les personnagesÂ : le neutre Personne ğŸ§‘ peut devenir un homme ğŸ‘¨ ou une femme ğŸ‘© en y ajoutant le point unicode du genre masculin â™‚ï¸ ou fÃ©minin â™€ï¸, sÃ©parÃ© par une jointure de largeur zÃ©ro (<i lang="en">zero-width joiner</i>, <code>â€</code>).</p>
<p>Pour obtenir un pompier ğŸ‘¨â€ğŸš’, on ajoute simplement un camion de pompier ğŸš’ Ã  une personne ğŸ§‘Â ! Nâ€™est-ce pas gÃ©nial, franchementÂ ? Et on peut Ã©videmment y ajouter le genre et le teint.</p>
<h3 id="la-personnalisation" tabindex="-1">La personnalisation</h3>
<p>Ainsi <a href="https://www.ffoodd.fr/devfest.2024/jeu/0-0/index.html">le premier palier permet de personnaliser le genre et le teint du hÃ©ros</a>.</p>
<p>Le formulaire nâ€™est composÃ© que de deux groupes de bouton radio, chacun ayant une valeur correspondant au point Unicode concernÃ©.</p>
<pre class="language-html" tabindex="0"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>legend</span><span class="token punctuation">></span></span>Genre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>legend</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>genre<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>feminin<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>â™€ï¸<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>feminin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>FÃ©minin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>genre<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masculin<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>â™‚ï¸<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>masculin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Masculin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>genre<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>neutre<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">checked</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>neutre<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Neutre<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">></span></span></code></pre>
<p>Lors de la soumission, les deux valeurs sÃ©lectionnÃ©es sont poussÃ©es dans le <code>localStorage</code> et rÃ©-employÃ©es dÃ¨s que possible dans la suite du jeu. Pour certains mÃ©chants, il suffit de concatÃ©ner le caractÃ¨re du mÃ©chant avec les deux sÃ©lectionsÂ : voilÃ  comme un Mage ğŸ§™ devient une Mage au teint sombre ğŸ§™ğŸ¿â€â™€ï¸.</p>
<h3 id="les-decors" tabindex="-1">Les dÃ©cors</h3>
<p>Jâ€™ai un peu luttÃ© avec les dÃ©cors, demandant mÃªme de lâ€™aide Ã  mon camarade ClÃ©ment Ã‰tienne. Et finalement, je suis revenu aux Ã©mojisÂ : certains ont un caractÃ¨re paysager intÃ©ressant, il suffit de les agrandir un peuâ€¦</p>
<p style="font-size:16rem;margin:0;padding:0;text-indent:0;text-align:center" role="presentation">ğŸ”ï¸</p>
<h3 id="les-navigateurs" tabindex="-1">Les navigateurs</h3>
<p>Les navigateurs et systÃ¨mes dâ€™exploitation ont leur propre livrÃ©e dâ€™Ã©mojis, avec des supports disparates et des rendus variÃ©s. Pour palier cet Ã©cueil, jâ€™ai optÃ© pour une solution trÃ¨s simple technologiquement parlantÂ : une typographie. Et Ã  ce jeu-lÃ , jâ€™avais dÃ©jÃ  ma prÃ©fÃ©rÃ©eÂ : <a href="https://github.com/mozilla/twemoji-colr">la Twemoji-COLR par Mozilla (sur GitHub, en anglais)</a>.</p>
<p>Les utilisateurs de Mozilla ne verront pas grand chose de nouveauÂ : elle est embarquÃ©e dans Firefox sous le nom de Twemoji Mozilla, ce qui permet de tenter dâ€™utiliser la version locale en CSS.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span> <span class="token punctuation">{</span>
	<span class="token property">font-display</span><span class="token punctuation">:</span> swap<span class="token punctuation">;</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Twemoji Mozilla'</span><span class="token punctuation">;</span>
	<span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
	<span class="token property">src</span><span class="token punctuation">:</span> <span class="token function">local</span><span class="token punctuation">(</span><span class="token string">'Twemoji Mozilla'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/assets/fonts/Twemoji.woff2'</span><span class="token punctuation">)</span></span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'woff2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Et le tour est jouÃ©Â : les utilisateurs de Firefox ne chargeront rien, et les autres tÃ©lÃ©chargeront une typographie pour afficher la mÃªme chose que Firefox. Choisissez mieux votre navigateur, la prochaine foisÂ !</p>
<figure><img src="/images/2024/11/firefox.png" alt="Capture dâ€™Ã©cran de lâ€™inspecteur de Polices de Firefox, pour la Twemoji Mozilla." width="348" height="102" loading="lazy" decoding="async"><figcaption>Firefox indique bien Â« systÃ¨me Â» pour lâ€™origine de la typographie.</figcaption></figure>
<h4 id="web-kit" tabindex="-1">WebKit</h4>
<p>Comme souvent quand je prÃ©pare un sujet, je me suis heurtÃ© Ã  quelques limites des navigateurs. En lâ€™occurrence, WebKit, le moteur de Safari et Epiphany, a des problÃ¨mes avec les variantes de teinte de la Twemoji-COLR. Jâ€™ai pu ouvrir <a href="https://bugs.webkit.org/show_bug.cgi?id=281739">un ticket sur leur Bugzilla (en anglais)</a>.</p>
<h2 id="la-coloration-syntaxique-sans-js" tabindex="-1">La coloration syntaxique sans JS</h2>
<p>Dans la mÃ©canique du jeu, des portions de code sont affichÃ©es (pour faire un Â«Â code Ã  trousÂ Â») et du code est saisi des Ã©lÃ©ments <code>&lt;input&gt;</code> et <code>&lt;textarea&gt;</code>.</p>
<p>Et pour lire et Ã©crire du code, la coloration syntaxique est drÃ´lement pratique et agrÃ©ableÂ ! Mais charger un script tel que <a href="https://prismjs.com/">PrismJS (en anglais)</a> ou <a href="https://highlightjs.org/">highlight.js (en anglais)</a> mâ€™a toujours semblÃ© dÃ©mesurÃ© pour la valeur ajoutÃ©e. Le bloc de code se retrouve charcutÃ© dans le DOM, oÃ¹ des <code>&lt;span&gt;</code> avec des classes plus ou moins lisibles saucissonnent chaque portion de texte en fonction de son rÃ´le syntaxique. Câ€™est carrÃ©ment indigeste.</p>
<p>Mais au moment oÃ¹ je prÃ©parais cet atelier, Heikki Lotvonen a publiÃ© un article ahurissantÂ : <a href="https://blog.glyphdrawing.club/font-with-built-in-syntax-highlighting/"><cite lang="en">Font with Built-In Syntax Highlighting</cite> (en anglais)</a>. Câ€™est Ã  mon sens, une petite rÃ©volutionÂ : une typographie tirant parti des fonctionnalitÃ©s OpenType et notamment la table COLR. Fini les tartines de <code>&lt;span&gt;</code>, place Ã  un code lisible et propreÂ !</p>
<p>Si les dÃ©tails dâ€™implÃ©mentation OpenType vous intÃ©ressent, je vous encourage Ã  lire lâ€™article. De mon cÃ´tÃ©, je me suis focalisÃ© sur la personnalisation de la palette, rendues possibles en CSS avec <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-palette-values"><code>@font-palette-values</code> (sur MDN, en anglais)</a> et la propriÃ©tÃ© <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@font-palette-values/override-colors"><code>override-colors</code> (sur MDN, en anglais)</a>.</p>
<p>VoilÃ  ce que Ã§a donne pour le jeu, dans lequel je profite de lâ€™utilisation de propriÃ©tÃ©s personnalisÃ©es CSS pour la gestion des couleursÂ :</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token atrule"><span class="token rule">@font-palette-values</span> --syntaxHighlighter</span> <span class="token punctuation">{</span>
	<span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'FontWithASyntaxHighlighter'</span><span class="token punctuation">;</span>
	<span class="token property">override-colors</span><span class="token punctuation">:</span>
		0 <span class="token function">var</span><span class="token punctuation">(</span>--foreground<span class="token punctuation">)</span><span class="token punctuation">,</span>
		4 rebeccapurple<span class="token punctuation">,</span>
		5 <span class="token function">var</span><span class="token punctuation">(</span>--accent<span class="token punctuation">)</span><span class="token punctuation">,</span>
		7 <span class="token function">var</span><span class="token punctuation">(</span>--muted<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Le rendu est pas mal, nonÂ ?</p>
<figure><img src="/images/2024/11/code.png" alt="Bloc de code avec coloration syntaxique et champs de formulaires." width="480" height="158" loading="lazy" decoding="async"></figure>
<p>Et câ€™est de la pure amÃ©lioration progressiveÂ : si votre navigateur ne supporte pas la table COLR, la rÃ¨gle <code>@font-palette-values</code> ou la propriÃ©tÃ© <code>override-colors</code>, vous aurez juste du texte brut avec la <i lang="en">monospace</i> par dÃ©faut.</p>
<h2 id="les-space-invaders" tabindex="-1">Les <i lang="en">Space Invaders</i></h2>
<p>Le dernier point sur lequel je me suis beaucoup amusÃ©, câ€™est le niveau des aliens. Lâ€™Ã©moji <i lang="en">alien monster</i> ğŸ‘¾ ressemble beaucoup, beaucoup, beaucoup aux vaisseaux de <i lang="en">Space Invaders</i>. Pour un jeu dâ€™invasion, Ã§a tombe bien.</p>
<p>Jâ€™ai donc voulu assumer la rÃ©fÃ©renceÂ : arriÃ¨re-plan noir, animation des envahisseurs qui dÃ©filent vers le bas, etâ€¦ un compteur de score.</p>
<h3 id="les-compteurs" tabindex="-1">Les compteurs</h3>
<p>Pour ceux qui font du CSS depuis longtemps, vous avez peut-Ãªtre dÃ©jÃ  entendu parler des <a href="https://developer.mozilla.org/fr/docs/Web/CSS/CSS_counter_styles/Using_CSS_counters">compteurs CSS</a>. Notre score correspondra simplement au nombre dâ€™aliens prÃ©sents.</p>
<p>Cependant, si notre compteur commence Ã  <code>1</code> et peut monter jusquâ€™Ã  <code>100</code> â€”Â et sachant que le jeu original disposait dâ€™un compteur sur cinq chiffresÂ â€” le rendu ne sera ni Ã©lÃ©gant ni une belle citation. Heureusement, <a href="https://developer.mozilla.org/fr/docs/Web/CSS/@counter-style">CSS nous permet de personnaliser le style du compteur avec <code>@counter-style</code></a>.</p>
<p>Pour obtenir un compteur sur cinq chiffres, affichant des <code>0</code> avant la valeur du compteur, voici la dÃ©claration utilisÃ©eÂ :</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token atrule"><span class="token rule">@counter-style</span> invasion</span> <span class="token punctuation">{</span>
	<span class="token property">system</span><span class="token punctuation">:</span> numeric<span class="token punctuation">;</span>
	<span class="token property">symbols</span><span class="token punctuation">:</span> <span class="token string">"0"</span> <span class="token string">"1"</span> <span class="token string">"2"</span> <span class="token string">"3"</span> <span class="token string">"4"</span> <span class="token string">"5"</span> <span class="token string">"6"</span> <span class="token string">"7"</span> <span class="token string">"8"</span> <span class="token string">"9"</span><span class="token punctuation">;</span>
	<span class="token property">pad</span><span class="token punctuation">:</span> 5 <span class="token string">"0"</span><span class="token punctuation">;</span>
	<span class="token property">speak-as</span><span class="token punctuation">:</span> numbers<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<h4 id="web-kit-encore" tabindex="-1">WebKit (encore)</h4>
<p>LÃ  aussi, WebKit est limitÃ©Â : les compteurs CSS ne sont pas incrÃ©mentÃ©s quand on ajoute des Ã©lÃ©ments au DOM. Câ€™est <a href="https://la-grange.net/karl/">Karl Dubost</a> qui a ouvert <a href="https://bugs.webkit.org/show_bug.cgi?id=281277">ce ticket sur Bugzilla (en anglais)</a>.</p>
<h3 id="les-couleurs" tabindex="-1">Les couleurs</h3>
<p>Un autre point saillant pour citer visuellement <i lang="en">Space Invaders</i>, ce sont les couleurs vives. Lâ€™Ã©moji utilisÃ© vient avec une couleur quâ€™on ne peut pas surcharger, donc on va devoir lâ€™altÃ©rer. Cette technique nâ€™est pas rÃ©cente, mais extrÃªmement utileÂ : lâ€™accumulation de <a href="https://developer.mozilla.org/fr/docs/Web/CSS/filter">filtres CSS</a> pour atteindre la bonne couleur.</p>
<p>Câ€™est un exercice compliquÃ©, et je remercie Barrett Sonntag pour son <a href="https://codepen.io/sosuke/pen/Pjoqqp">gÃ©nÃ©rateur de filtres pour convertir du noir vers un code hÃ©xadÃ©cimal (sur CodePen, en anglais)</a>. La seule contrainte est de commencer par du noir ce qui se rÃ©sout facilement en appliquant en premier <code>grayscale(100%) brightness(0%)</code>.</p>
<pre class="language-css" tabindex="0"><code class="language-css"><span class="token selector">mu-tant[type="invaders"]:nth-child(1n + 1)</span> <span class="token punctuation">{</span>
	<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>15%<span class="token punctuation">)</span> <span class="token function">sepia</span><span class="token punctuation">(</span>90%<span class="token punctuation">)</span> <span class="token function">saturate</span><span class="token punctuation">(</span>5339%<span class="token punctuation">)</span> <span class="token function">hue-rotate</span><span class="token punctuation">(</span>6deg<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>96%<span class="token punctuation">)</span> <span class="token function">contrast</span><span class="token punctuation">(</span>127%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">mu-tant[type="invaders"]:nth-child(2n + 1)</span> <span class="token punctuation">{</span>
	<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>66%<span class="token punctuation">)</span> <span class="token function">sepia</span><span class="token punctuation">(</span>82%<span class="token punctuation">)</span> <span class="token function">saturate</span><span class="token punctuation">(</span>4488%<span class="token punctuation">)</span> <span class="token function">hue-rotate</span><span class="token punctuation">(</span>88deg<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>117%<span class="token punctuation">)</span> <span class="token function">contrast</span><span class="token punctuation">(</span>129%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">mu-tant[type="invaders"]:nth-child(3n + 1)</span> <span class="token punctuation">{</span>
	<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>9%<span class="token punctuation">)</span> <span class="token function">sepia</span><span class="token punctuation">(</span>90%<span class="token punctuation">)</span> <span class="token function">saturate</span><span class="token punctuation">(</span>7442%<span class="token punctuation">)</span> <span class="token function">hue-rotate</span><span class="token punctuation">(</span>247deg<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>91%<span class="token punctuation">)</span> <span class="token function">contrast</span><span class="token punctuation">(</span>149%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">mu-tant[type="invaders"]:nth-child(4n + 1)</span> <span class="token punctuation">{</span>
	<span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">grayscale</span><span class="token punctuation">(</span>100%<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>0%<span class="token punctuation">)</span> <span class="token function">invert</span><span class="token punctuation">(</span>91%<span class="token punctuation">)</span> <span class="token function">sepia</span><span class="token punctuation">(</span>27%<span class="token punctuation">)</span> <span class="token function">saturate</span><span class="token punctuation">(</span>1428%<span class="token punctuation">)</span> <span class="token function">hue-rotate</span><span class="token punctuation">(</span>1deg<span class="token punctuation">)</span> <span class="token function">brightness</span><span class="token punctuation">(</span>110%<span class="token punctuation">)</span> <span class="token function">contrast</span><span class="token punctuation">(</span>104%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>Câ€™est verbeux, mais Ã§a fonctionneÂ !</p>
<figure><img src="/images/2024/11/invaders.png" alt="Des lignes dâ€™aliens aux couleurs vives sur un fond noir, et un score en haut Ã  droite en monospace." width="480" height="457" loading="lazy" decoding="async"><figcaption>PlutÃ´t ressemblant, non ?</figcaption></figure>
<h2 id="les-web-components" tabindex="-1">Les <i lang="en">Web Components</i></h2>
<p>Et dire que je nâ€™ai parlÃ© que de HTML et CSS, pour le momentâ€¦ Je ne mâ€™Ã©tendrai pas autant, mais cÃ´tÃ© JavaScript, je me suis (un peu trop) amusÃ© avec les <i lang="en">Web Components</i>. En rÃ©sumÃ©Â :</p>
<ul>
<li><code>&lt;mu-tant&gt;</code> est le composant qui affiche un mutant, et gÃ¨re sa mutationÂ : un changement dâ€™attribut, de valeur dâ€™attribut, de contenu, de descendance, etc. Le tout Ã  intervalle irrÃ©gulier, et de faÃ§on dÃ©sordonnÃ©e.</li>
<li><code>&lt;code-runner&gt;</code> Ã©tend la fonctionnalitÃ© du formulaire pour normaliser les rÃ©ponses et les envoyer au <code>&lt;play-ground&gt;</code>. Pour le clin dâ€™Å“il, lâ€™Ã©vÃ©nement qui permet de diffuser les rÃ©ponses est intitulÃ© <code>voightkampff</code>.</li>
<li><code>&lt;play-ground&gt;</code> est le composant le plus critiqueÂ : il dÃ©clenche lâ€™invasion, surveille lâ€™Ã©vÃ©nement <code>voightkampff</code>, exÃ©cute le code soumis, et donne le verdict (en ouvrant la fenÃªtre modale appropriÃ©e).</li>
</ul>
<p>Dans tout Ã§a, jâ€™ai Ã©normÃ©ment jouÃ© avec les <code>mutationObserver</code>, les intervalles et les minuteurs, les Ã©mojis, et la gÃ©nÃ©ration de valeurs alÃ©atoires.</p>
<h2 id="conclusion" tabindex="-1">Conclusion</h2>
<p>Si tout ce fatras vous rend curieux, je vous invite Ã  visiter <a href="https://github.com/ffoodd/html-mutant/tree/main">le dÃ©pÃ´t du jeu sur GitHub</a> et Ã  en faire ce que vous voulezÂ !</p>
<figure><img src="/images/2024/11/invasion.png" alt="Niveau 2-1 : le fantÃ´me, dans lequel il faut configurer les options du mutationObserver pour enrayer lâ€™invasion. Les fantÃ´mes apparaissent sur un dÃ©cor nuageux, au milieu duquel Ã©merge un pont ressemblant au Golden Gate, Ã  San Francisco." width="480" height="276" loading="lazy" decoding="async"></figure>
<p>Et si vous vous lancez dans le jeu, je vous invite Ã  consulter <a href="https://www.ffoodd.fr/devfest.2024/#slide-1">les <i lang="en">slides</i> adossÃ©s au jeu</a>. En avanÃ§ant, vous verrez que chaque mutant a son slide. Nâ€™avancez pas trop vite, car le <i lang="en">slide</i> suivant donne la rÃ©ponseâ€¦</p>
<p>Faites chauffer votre inspecteurÂ !</p>
<hr>
<h3 id="note" tabindex="-1">Note</h3>
<p>Cet article fait partie du Â«Â <i lang="en">Advent of Tech 2024 Onepoint</i>Â Â», <a href="https://dev.to/onepoint/advent-of-tech-2024-onepoint-le">une sÃ©rie dâ€™articles tech</a> publiÃ©s par <a href="https://dev.to/onepoint">Onepoint sur dev.to</a> pour patienter jusquâ€™Ã  NoÃ«l.</p>

			</div>
		<footer class="small mt2">
			<p class="pl2 mt0 pt1">
				Article rÃ©digÃ© par <strong itemprop="author"><span class="fn">GaÃ«l Poupard</span></strong>.
				ModifiÃ© le <time class="updated" datetime="2024-11-18" itemprop="dateModified">18 novembre 2024</time>.
			</p>
		</footer>
	</article>
<div id="comments" class="comments-area pl2 pt2 mt2 print-hidden"><div class="comment-respond">
	<h3>Laisser un commentaire</h3>
	<form action="https://github.com/ffoodd/ffoodd.fr/new/main/src/posts/astuces-ateliers-html-mutant/comments/new?value=&filename=8144.md" method="post" class="comment-form">
		<p class="comment-notes">
			Vous devez avoir un compte GitHub pour ajouter un commentaire.
		</p>
		<p>
			<label for="pseudo">Pseudonyme GitHub <span class="required">(obligatoire)</span></label>
			<input id="pseudo" name="pseudo" type="text"
						 aria-required="true" required="required" autocomplete="nickname">
		</p>
		<p>
			<label for="comment">Commentaire <span class="required">(obligatoire)</span></label>
			<textarea id="comment" name="comment" cols="45" rows="8"
								aria-required="true" required="required" aria-describedby="comment-note"></textarea>
			<span id="comment-note" class="small">Markdown acceptÃ©.</span>
		</p>
		<p class="form-submit">
			<input name="submit" type="submit" id="submit" class="submit" value="Laisser un commentaire">
		</p>
	</form>
	<script>
		const form = document.querySelector('.comment-form');
		const dynamicCommentID = Math.random().toString(36).substr(0, 4);

		form.addEventListener('submit', async (event) => {
			event.preventDefault();
			const pseudo = document.getElementById('pseudo').value;
			const comment = document.getElementById('comment').value;

			const content = await fetch(`https://api.github.com/users/${pseudo}`)
				.then(response => response.json())
				.then(user => {
					const content = encodeURIComponent(`---
date: "${new Date().toISOString()}"
author_name: "${user.name}"
author_url: "${user.blog}"
author_avatar: "${user.avatar_url}"
id: "${dynamicCommentID}"
tags: ["comments","astuces-ateliers-html-mutant"]
---
${comment}`);

					window.open(`https://github.com/ffoodd/ffoodd.fr/new/main/_src/posts/astuces-ateliers-html-mutant/comments/?value=${content}&filename=${dynamicCommentID}.md`)
				});
		});
	</script>
</div>
</main><aside class="col pt8 pl0 pr0 print-hidden" role="complementary" id="sommaire">
		<div class="aside pl2 pt2 pr3">
			<h3 class="tk-bello-pro h2-like m-reset">Sommaire</h3>
			<div class="textwidget">
				<ol><li><a href="#la-mecanique-du-jeu">La mÃ©canique du jeu</a></li><li><a href="#les-particularites-de-dialog">Les particularitÃ©s de &lt;dialog&gt;</a></li><li><a href="#les-emojis">Les Ã©mojis</a></li><li><a href="#la-coloration-syntaxique-sans-js">La coloration syntaxique sans JS</a></li><li><a href="#les-space-invaders">Les Space Invaders</a></li><li><a href="#les-web-components">Les Web Components</a></li><li><a href="#conclusion">Conclusion</a></li></ol>
			</div>
		</div>
	</aside>
		</div>
		<footer class="mw--site mod txtcenter center" role="contentinfo" itemscope itemtype="https://schema.org/Person">
			<ul class="ffeeeedd--contact ul-reset p-reset mt0 print-hidden"><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__mastodon" href="https://mamot.fr/@ffoodd" itemprop="url" rel="me"title="GaÃ«l Poupard sur Mastodon">
							<span itemprop="name">Mastodon</span>
						</a>
					</li><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__github" href="https://github.com/ffoodd" itemprop="url"title="GaÃ«l Poupard sur GitHub">
							<span itemprop="name">GitHub</span>
						</a>
					</li><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__codepen" href="https://codepen.io/ffoodd" itemprop="url"title="GaÃ«l Poupard sur CodePen">
							<span itemprop="name">CodePen</span>
						</a>
					</li><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__dribbble" href="https://dribbble.com/ffoodd" itemprop="url"title="GaÃ«l Poupard sur Dribbble">
							<span itemprop="name">Dribbble</span>
						</a>
					</li><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__linkedin" href="https://www.linkedin.com/pub/ga%C3%ABl-poupard/30/17b/401" itemprop="url"title="GaÃ«l Poupard sur LinkedIn">
							<span itemprop="name">LinkedIn</span>
						</a>
					</li><li class="inbl pa1" itemscope itemprop="contactPoint">
						<a class="skip inbl ir ffeeeedd--sprite ffeeeedd--sprite__rss" href="/feed/index.xml" itemprop="url"title="La vie en #ffoodd | Flux RSS">
							<span itemprop="name">RSS</span>
						</a>
					</li></ul>

			<p class="small">
				&copy; 2024 La vie en #ffoodd &mdash; Design et intÃ©gration par <span itemprop="name">GaÃ«l Poupard</span> &mdash; <a href="/mentions-legales/">Mentions lÃ©gales</a>
				<br>
				Sauf mention contraire, lâ€™ensemble du contenu est sous <a rel="license" href="creativecommons.org/licenses/by-nc-sa/4.0/fr/">Licence <abbr lang="en" title="Creative Commons">CC</abbr> <abbr lang="en" title="Attribution">BY</abbr>-<abbr lang="en" title="Non Commercial">NC</abbr>-<abbr lang="en" title="Share Alike">SA</abbr></a>.
			</p>

			<meta itemprop="jobTitle" content="Webdesigner et intÃ©grateur web">
			<meta itemprop="worksFor" content="onepoint">
		</footer></body>
</html>
